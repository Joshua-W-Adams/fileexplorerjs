var fileexplorerjs=function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=http},function(e,t,n){
/*!
 * npm Entry File
 * (c) 2020 Joshua Adams
 */
var o=n(2);e.exports=n(3)("./".concat(o.name,".js"))},function(e){e.exports=JSON.parse('{"name":"fileexplorerjs","version":"1.0.2","description":"Creates file explorer user interface component","engines":{"node":"10.x"},"scripts":{"start":"node index.js"},"main":"index.js","repository":{"type":"git","url":"git+https://github.com/Joshua-W-Adams/fileexplorerjs.git"},"author":"Joshua Adams","license":"ISC","bugs":{"url":"https://github.com/Joshua-W-Adams/fileexplorerjs/issues"},"homepage":"https://github.com/Joshua-W-Adams/fileexplorerjs#readme","devDependencies":{"@babel/core":"^7.8.4","@babel/preset-env":"^7.8.4","babel-loader":"^8.0.6","eslint-config-airbnb-base":"^14.0.0","eslint-plugin-import":"^2.20.0","gulp":"^4.0.2","gulp-concat":"^2.6.1","gulp-eslint":"^6.0.0","gulp-minify-css":"^1.2.4","gulp-rename":"^2.0.0","gulp-sass":"^4.0.2","gulp-stylelint":"^13.0.0","stylelint":"^13.0.0","stylelint-config-recommended":"^3.0.0","webpack-stream":"^5.2.1"},"dependencies":{"breadcrumbjs":"^1.0.4","connect-busboy":"0.0.2","contextmenuator":"^1.0.1","express":"^4.17.1","gulp-nodemon":"^2.5.0","inputator":"^1.0.1","modalator":"^2.1.3","nodemon":"^2.0.3","tableator":"^1.3.1","treeator":"^1.4.3"}}')},function(e,t,n){var o={"./fileexplorerjs.js":4,"./http.js":0,"./tests.js":11};function r(e){var t=a(e);return n(t)}function a(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=a,e.exports=r,r.id=3},function(e,t,n){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
 * Fileexplorerjs
 * A JavaScript GUI module for exploring file systems
 * (c) 2020 Joshua Adams
 */var r,a,i=n(5),l=n(6),d=n(7),c=n(8),u=n(9),s=n(10),f=n(0),m=[],p={dataModelIndex:null,data:null};function h(e,t){for(var n,o=0;o<t.length;o++)if(t[o].FILE_PATH===e)return n=o;return n}function b(e,t){var n={DATA_DEPTH:"",ICON_TYPE:"",NAME:"add new item",SIZE:"",LAST_EDIT_DATE:"",FILE_PATH:t};return e.push(n),e}function v(e,t){for(var n="",o=0;o<=t;o++)n=o===t?"".concat(n).concat(e[o].item):"".concat(n).concat(e[o].item,"/");return n}function _(e){var t=document.getElementById("treeator-tree").getElementsByTagName("tr");d.onClickDefault(t[e]),d.onDblClickDefault(t[e])}function g(e){for(var t=document.getElementById(r.ui.breadcrumbDiv);t.firstChild;)t.removeChild(t.lastChild);var n={div:r.ui.breadcrumbDiv,breadcrumbs:{items:e}};i.init(n)}function E(e,t,n){if("folder"===e.ICON_TYPE){R(t,b(d.getChildren(t,n),n[t].FILE_PATH))}else{var o=function(e,t){for(var n=e-1;n>-1;n--)if("folder"===t[n].ICON_TYPE&&t[n].DATA_DEPTH===t[e].DATA_DEPTH-1)return n;return-1}(t,n);R(o,b(d.getChildren(o,n),n[o].FILE_PATH))}}function y(e,t){for(var n=e.FILE_PATH.split("/"),o=[],r=0;r<n.length;r++){var a={item:n[r],onClick:function(e,n,o){var r=h(v(n,o),t);_(r),E(t[r],r,t)}};o.push(a)}g(o)}function T(e,t){if(e){for(var n=[],o=[],r=0;r<e.length;r++){var a=e[r];"pass"===a.STATUS?n.push(a):o.push(a)}n.length>0&&function(e,t){var n=[],o=p.dataModelIndex,r=-1;(o||0===o)&&(r=m[o].DATA_DEPTH);for(var a=0;a<e.length;a++){var i=e[a],l=void 0;if("add"===t)l=W(i,r,o),n.push(l),p.data.splice(p.data.length-1,0,l.data);else if("delete"===t){l=J(i),n.push(l);var c=h(i.FILE_PATH,p.data);p.data.splice(c,1)}else if("update"===t){l=k(i),n.push(l);var u=j(i),s=u.oldFilePath,f=u.newFilePath,b=u.newName,v=h(s,p.data),_=p.data[v];_.NAME=b,_.FILE_PATH=f}}R(o,p.data),function(e,t){"add"===e?d.appendTreeRecords(t):"delete"===e?d.removeTreeRecords(t):"update"===e&&d.updateTreeRecords(t)}(t,n)}(n,t),o.length}}function D(e,t){var n=function(e){var t=e.files,n=document.createElement("ol");n.style.listStyleType="none";for(var o=0;o<t.length;o++){var r=t[o],a=document.createElement("li");a.innerHTML=r.name,a.style.padding="10px 0px",n.appendChild(a)}return n}(e),o=document.getElementById(t);o.innerHTML="",o.appendChild(n)}function I(e,t){return[{name:"modal",child:[{name:"dialog",child:[{name:"dialog_header",child:[{name:"dialog_header_title",element:{content:"Upload Files"}}]},{name:"dialog_footer",element:{value:function(){var n=document.createElement("form");return n.action=e,n.onsubmit=function(e,t){return function(){var n=new FormData(e),o={method:"POST",url:e.action,payload:n,headers:{directory:t}};return document.getElementById("selectFilesButton").files.length>0&&f.sendRequest(o).then((function(e){T(JSON.parse(e),"add")})),!1}}(n,t),n}},child:[{name:"dialog_footer_child",child:[{name:"dialog_footer_button_two",element:{value:function(){return function(){var e=document.createElement("input");e.type="file",e.multiple="multiple",e.id="selectFilesButton",e.name="uploadFiles",e.style.display="none";var t=document.createElement("label");return t.htmlFor="selectFilesButton",t.innerHTML="Select Files",t.style.display="inline-block",e.onchange=function(){D(e,"dialog_body")},t.appendChild(e),t}()}},onclick:function(){}},{name:"dialog_footer_button_one",element:{value:function(){var e=document.createElement("input");return e.type="submit",e.value="Upload Files",e}},style:function(){return{"background-color":"#5a6268","font-family":"Gotham SSm, Helvetica, Arial, sans-serif","font-size":"16px"}}}]}]}]}]}]}function x(){var e=document.createElement("input");return function(e,t){for(var n=Object.keys(t),r=0;r<n.length;r++){var a=n[r];"object"===o(t[a])&&null!==t[a]?Object.assign(e[a],t[a]):e[a]=t[a]}}(e,{style:{"font-size":"16px","font-family":"roboto",padding:"10px",boxSizing:"border-box",width:"100%",border:"solid 1px rgba(0,0,0,.125)",borderRadius:"3px",backgroundColor:"rgba(241,243,244,1)"}}),e}function A(){var e="";return(p.dataModelIndex||0===p.dataModelIndex)&&(e=m[p.dataModelIndex].FILE_PATH),e}function P(){var e=x();return[{name:"modal",child:[{name:"dialog",child:[{name:"dialog_header",child:[{name:"dialog_header_title",element:{content:"Add Folder"}}]},{name:"dialog_body",element:{value:function(){var t=document.createElement("div");return t.appendChild(e),t}},style:"min-height:40px;"},{name:"dialog_footer",child:[{name:"dialog_footer_child",child:[{name:"dialog_footer_button_two",style:"display:none;"},{name:"dialog_footer_button_one",element:{content:"Add Folder"},style:"background-color:#007bff;",onclick:function(){var t=e.value;!function(e,t){var n={method:"POST",url:"".concat(r.api.add,"/folder"),payload:JSON.stringify([{dir:e,folder:t}]),headers:{"Content-Type":"application/json"}};f.sendRequest(n).then((function(e){T(JSON.parse(e),"add")})),a.hide()}(A(),t)}}]}]}]}]}]}function S(e){for(var t=e.split("/"),n="",o=0;o<t.length-1;o++){var r=t[o];r&&""!==r&&(n+=""!==n?"/".concat(t[o]):"".concat(t[o]))}return n}function F(){var e=c.getState().onMouseDownRow.data;if(e){var t,n=e.ICON_TYPE;"file"===n?t=[{dir:S(e.FILE_PATH),file:e.NAME}]:"folder"===n&&(t=[{dir:S(e.FILE_PATH),folder:e.NAME}]);var o={method:"POST",url:"".concat(r.api.delete,"/").concat(n),payload:JSON.stringify(t),headers:{"Content-Type":"application/json"}};f.sendRequest(o).then((function(e){T(JSON.parse(e),"delete")}))}a.hide()}function N(){var e=x(),t=c.getState().onMouseDownRow.data;return[{name:"modal",child:[{name:"dialog",child:[{name:"dialog_header",child:[{name:"dialog_header_title",element:{content:"Rename Item"}}]},{name:"dialog_body",element:{value:function(){var n=document.createElement("div"),o=document.createElement("div");return n.innerHTML="Are you sure you want to rename the following item?\n              <br></br><br>".concat(t.NAME,"</br><br></br>\n              This action is irreversible.<br></br>"),n.appendChild(o),n.appendChild(e),n}},style:"min-height:40px;"},{name:"dialog_footer",child:[{name:"dialog_footer_child",child:[{name:"dialog_footer_button_two",style:"display:none;"},{name:"dialog_footer_button_one",element:{content:"Rename Item"},style:"background-color:red;",onclick:function(){var n=e.value;!function(e,t){if(e){var n,o=e.ICON_TYPE,i=S(e.FILE_PATH);"file"===o?n=[{OLD_DIR:i,OLD_FILE:e.NAME,NEW_DIR:i,NEW_FILE:t,TYPE:"file"}]:"folder"===o&&(n=[{OLD_DIR:i,OLD_FOLDER:e.NAME,NEW_DIR:i,NEW_FOLDER:t,TYPE:"folder"}]);var l={method:"POST",url:"".concat(r.api.update,"/").concat(o),payload:JSON.stringify(n),headers:{"Content-Type":"application/json"}};f.sendRequest(l).then((function(e){T(JSON.parse(e),"update")}))}a.hide()}(t,n)}}]}]}]}]}]}function L(e){a&&a.remove();var t=s.buildModal(e);t.show(),a=t}function O(){L(I("".concat(r.api.add,"/file"),A()))}function w(){L(P())}function C(){var e;L((e=c.getState().onMouseDownRow.data,[{name:"modal",child:[{name:"dialog",child:[{name:"dialog_header",child:[{name:"dialog_header_title",element:{content:"Delete Item"}}]},{name:"dialog_body",element:{value:function(){var t=document.createElement("div");return t.innerHTML="Are you sure you want to delete to following item?\n              <br></br><br>".concat(e.NAME,"</br><br></br>\n              This action is irreversible."),t}},style:"min-height:40px;"},{name:"dialog_footer",child:[{name:"dialog_footer_child",child:[{name:"dialog_footer_button_two",style:"display:none;"},{name:"dialog_footer_button_one",element:{content:"Delete Item"},style:"background-color: red;",onclick:F}]}]}]}]}]))}function M(){L(N())}function H(){var e=c.getState().onHoverRow,t=e.data.FILE_PATH,n=e.data.NAME,o=e.data.ICON_TYPE;if(n&&t&&"file"===o){var a=document.createElement("a");a.download=n,a.href="".concat(r.api.download).concat(t),a.click(),a.remove()}}function R(e,t){p={dataModelIndex:e,data:t};for(var n=document.getElementById(r.ui.tableDiv);n.firstChild;)n.removeChild(n.lastChild);var o={div:r.ui.tableDiv,data:t,headers:{displayNames:!0,sourceNames:["NAME","SIZE","LAST_EDIT_DATE"],names:["Name","Size","Last Edit Date"],widths:["50%","25%","25%"],alignment:["left","center","center"]},rows:{rowTypeIcons:"filesystem"},cells:{onDblClick:function(e,t,n,o){var r=h(o.FILE_PATH,m);(_(r),y(m[r],m),"folder"===o.ICON_TYPE)&&R(r,b(d.getChildren(r,m),m[r].FILE_PATH))}}};c.init(o),function(){var e={div:r.ui.tableDiv,items:{Download:H,Add:{Folder:w,File:O},Delete:C,Rename:M}};u.init(e)}()}function j(e){var t={oldFilePath:"",newFilePath:"",newName:""};return"folder"===e.TYPE?(t.oldFilePath="/".concat(e.OLD_DIR,"/").concat(e.OLD_FOLDER),t.newFilePath="/".concat(e.NEW_DIR,"/").concat(e.NEW_FOLDER),t.newName=e.NEW_FOLDER):"file"===e.TYPE&&(t.oldFilePath="/".concat(e.OLD_DIR,"/").concat(e.OLD_FILE),t.newFilePath="/".concat(e.NEW_DIR,"/").concat(e.NEW_FILE),t.newName=e.NEW_FILE),t}function k(e){var t=j(e);return{position:h(t.oldFilePath,m),updates:[{property:"NAME",value:t.newName},{property:"FILE_PATH",value:t.newFilePath}],childUpdates:[{property:"FILE_PATH",findStartsWithString:t.oldFilePath,replaceString:t.newFilePath}],htmlUpdates:[{column:0,value:t.newName}]}}function W(e,t,n){var o={DATA_DEPTH:t+1,NAME:e.NAME,ICON_TYPE:e.ICON_TYPE,SIZE:e.SIZE,LAST_EDIT_DATE:e.LAST_EDIT_DATE,FILE_PATH:e.FILE_PATH};return{position:d.findLastChild(n||0,m)+1,data:o}}function J(e){return{position:h(e.FILE_PATH,m)}}e.exports={init:function(e){var t;(t={method:"GET",url:(r=e).api.directory,headers:{"Content-Type":"application/json"}},f.sendRequest(t)).then((function(e){var t,n=JSON.parse(e),o=function(e){var t={tree:{div:r.ui.treeDiv,data:e,columns:{sourceNames:["NAME"],newNames:["name"],widths:[250],alignment:["left"]},rows:{rowTypeIcons:"filesystem",onDblClick:function(t,n,o){y(n,e),E(n,o,e)}},cells:{}},search:{div:r.ui.treeSearchDiv}};return d.init(t),t}(m=n[0].data);g([]),t={div:r.ui.tableSearchDiv,renderer:function(){var e={};return e.id="".concat(r.ui.tableSearchDiv,"_input"),e.name="search",e.placeholder="Search Folder",e.style={"font-size":"16px","font-family":"roboto",padding:"10px",boxSizing:"border-box",width:"100%",border:"solid 1px rgba(0,0,0,.125)",borderRadius:"3px",textIndent:"30px",backgroundColor:"rgba(241,243,244,1)"},e},onKeyUp:function(){c.searchTable(r.ui.tableDiv,"".concat(r.ui.tableSearchDiv,"_input"))},icon:{}},l.init(t),function(e){var t={div:r.ui.treeSearchDiv,renderer:function(){var e={};return e.id="".concat(r.ui.treeSearchDiv,"_input"),e.name="search",e.placeholder="Search Directory",e.style={"font-size":"16px","font-family":"roboto",padding:"10px",boxSizing:"border-box",width:"100%",border:"solid 1px rgba(0,0,0,.125)",borderRadius:"3px",textIndent:"30px",backgroundColor:"rgba(241,243,244,1)"},e},onKeyUp:function(){d.searchTable("".concat(r.ui.treeSearchDiv,"_input"),"treeator-tree",r.ui.treeDiv,e)},icon:{}};l.init(t)}(o),R(null,b([],m[0].FILE_PATH))}))}}},function(e,t){e.exports=breadcrumbjs},function(e,t){e.exports=inputator},function(e,t){e.exports=treeator},function(e,t){e.exports=tableator},function(e,t){e.exports=contextmenuator},function(e,t){e.exports=modalator},function(e,t){}]);
//# sourceMappingURL=fileexplorerjs.min.js.map